<html><head><title>Role Access Lists Portlet Manual</title><style type="text/css">.lst-kix_32hhcqmuu2me-2>li:before{content:"\0025a0  "}.lst-kix_32hhcqmuu2me-5>li:before{content:"\0025a0  "}.lst-kix_32hhcqmuu2me-3>li:before{content:"\0025cf  "}.lst-kix_ou877f141zaf-8>li:before{content:"\0025a0  "}.lst-kix_45pxdpmvn6vk-4>li:before{content:"\0025cb  "}.lst-kix_45pxdpmvn6vk-1>li:before{content:"\0025cb  "}.lst-kix_ou877f141zaf-3>li:before{content:"\0025cf  "}.lst-kix_py5kmclk031q-0>li:before{content:"\0025cf  "}.lst-kix_45pxdpmvn6vk-0>li:before{content:"\0025cf  "}.lst-kix_jnerpw5nv189-4>li:before{content:"\0025cb  "}.lst-kix_jnerpw5nv189-2>li:before{content:"\0025a0  "}.lst-kix_8agmhyqhgwov-0>li:before{content:"\0025cf  "}.lst-kix_32hhcqmuu2me-0>li:before{content:"\0025cf  "}.lst-kix_8agmhyqhgwov-5>li:before{content:"\0025a0  "}.lst-kix_jnerpw5nv189-6>li:before{content:"\0025cf  "}.lst-kix_45pxdpmvn6vk-8>li:before{content:"\0025a0  "}.lst-kix_32hhcqmuu2me-7>li:before{content:"\0025cb  "}.lst-kix_py5kmclk031q-7>li:before{content:"\0025cb  "}.lst-kix_ou877f141zaf-6>li:before{content:"\0025cf  "}.lst-kix_py5kmclk031q-4>li:before{content:"\0025cb  "}.lst-kix_45pxdpmvn6vk-3>li:before{content:"\0025cf  "}.lst-kix_scmpco9xn1qg-0>li:before{content:"\0025cf  "}.lst-kix_32hhcqmuu2me-8>li:before{content:"\0025a0  "}.lst-kix_45pxdpmvn6vk-2>li:before{content:"\0025a0  "}.lst-kix_32hhcqmuu2me-4>li:before{content:"\0025cb  "}.lst-kix_scmpco9xn1qg-2>li:before{content:"\0025a0  "}.lst-kix_jnerpw5nv189-7>li:before{content:"\0025cb  "}.lst-kix_ou877f141zaf-0>li:before{content:"\0025cf  "}.lst-kix_py5kmclk031q-1>li:before{content:"\0025cb  "}.lst-kix_ou877f141zaf-4>li:before{content:"\0025cb  "}.lst-kix_scmpco9xn1qg-1>li:before{content:"\0025cb  "}.lst-kix_8agmhyqhgwov-8>li:before{content:"\0025a0  "}.lst-kix_scmpco9xn1qg-3>li:before{content:"\0025cf  "}.lst-kix_ou877f141zaf-2>li:before{content:"\0025a0  "}.lst-kix_8agmhyqhgwov-1>li:before{content:"\0025cb  "}.lst-kix_jnerpw5nv189-1>li:before{content:"\0025cb  "}.lst-kix_32hhcqmuu2me-1>li:before{content:"\0025cb  "}.lst-kix_scmpco9xn1qg-7>li:before{content:"\0025cb  "}.lst-kix_py5kmclk031q-5>li:before{content:"\0025a0  "}.lst-kix_ou877f141zaf-7>li:before{content:"\0025cb  "}.lst-kix_scmpco9xn1qg-8>li:before{content:"\0025a0  "}.lst-kix_scmpco9xn1qg-4>li:before{content:"\0025cb  "}.lst-kix_py5kmclk031q-6>li:before{content:"\0025cf  "}.lst-kix_jnerpw5nv189-5>li:before{content:"\0025a0  "}.lst-kix_45pxdpmvn6vk-5>li:before{content:"\0025a0  "}.lst-kix_45pxdpmvn6vk-7>li:before{content:"\0025cb  "}.lst-kix_scmpco9xn1qg-6>li:before{content:"\0025cf  "}.lst-kix_jnerpw5nv189-0>li:before{content:"\0025cf  "}.lst-kix_py5kmclk031q-3>li:before{content:"\0025cf  "}.lst-kix_py5kmclk031q-2>li:before{content:"\0025a0  "}.lst-kix_8agmhyqhgwov-3>li:before{content:"\0025cf  "}.lst-kix_py5kmclk031q-8>li:before{content:"\0025a0  "}.lst-kix_8agmhyqhgwov-2>li:before{content:"\0025a0  "}.lst-kix_scmpco9xn1qg-5>li:before{content:"\0025a0  "}.lst-kix_8agmhyqhgwov-6>li:before{content:"\0025cf  "}.lst-kix_8agmhyqhgwov-4>li:before{content:"\0025cb  "}.lst-kix_jnerpw5nv189-3>li:before{content:"\0025cf  "}.lst-kix_ou877f141zaf-5>li:before{content:"\0025a0  "}.lst-kix_45pxdpmvn6vk-6>li:before{content:"\0025cf  "}.lst-kix_ou877f141zaf-1>li:before{content:"\0025cb  "}.lst-kix_32hhcqmuu2me-6>li:before{content:"\0025cf  "}.lst-kix_8agmhyqhgwov-7>li:before{content:"\0025cb  "}.lst-kix_jnerpw5nv189-8>li:before{content:"\0025a0  "}ol{margin:0;padding:0}.c13{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c10{list-style-type:none;margin:0;padding:0}.c6{text-decoration:underline;font-weight:bold}.c1{padding-left:0pt;margin-left:72pt}.c5{color:inherit;text-decoration:inherit}.c3{color:#1155cc;text-decoration:underline}.c4{padding-left:0pt;margin-left:36pt}.c11{color:#ff0000}.c12{margin-left:18pt}.c8{margin-left:36pt}.c0{direction:ltr}.c14{font-weight:bold}.c9{margin-left:54pt}.c2{height:11pt}.c7{font-style:italic}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Trebuchet MS"}p{color:#000000;font-size:11pt;margin:0;font-family:"Trebuchet MS"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c13"><p class="c0 title"><a name="h.81vxvqwo4jru"></a><span>Role Access Lists</span></p><p class="c0 subtitle"><a name="h.uvndd77sks5p"></a><span>(CP Portlet &amp; Hook Plugins) </span></p><p class="c0 c2"><span></span></p><p class="c12 c0"><span class="c3"><a class="c5" href="#h.g7c4n7khr3jb">Short Description</a></span></p><p class="c12 c0"><span class="c3"><a class="c5" href="#h.18v8pvjk1ywf">Definitions</a></span></p><p class="c0 c12"><span class="c3"><a class="c5" href="#h.85xg6bc75b60">Description</a></span></p><p class="c0 c8"><span class="c3"><a class="c5" href="#h.ockhxhdmag6k">Role Access Lists Portlet</a></span></p><p class="c0 c9"><span class="c3"><a class="c5" href="#h.so21npm2gxqw">Role Access Lists Tab</a></span></p><p class="c0 c9"><span class="c3"><a class="c5" href="#h.xgp2mwq2001d">Rules Configuration Tab</a></span></p><p class="c8 c0"><span class="c3"><a class="c5" href="#h.ob899mpdgbaw">Role Access Lists Hook</a></span></p><p class="c0 c2"><span></span></p><p class="c0 c2"><span></span></p><h1 class="c0"><a name="h.g7c4n7khr3jb"></a><span>Short Description</span></h1><p class="c0 c2"><span></span></p><p class="c0"><span>Have you ever been in need of a way to restrict Control Panel access to administrative users when they attempt login from outside of your network ?</span></p><p class="c0 c2"><span></span></p><p class="c0"><span>Well, here&rsquo;s a portal-wise simple security plugin restricting login to authorized users when they attempt access without having the desired combination of IP address and portal role set by the portal administrator herewith.</span></p><p class="c0 c2"><span></span></p><h1 class="c0"><a name="h.18v8pvjk1ywf"></a><span>Definitions</span></h1><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_32hhcqmuu2me-0 start"><li class="c0 c4"><span>A </span><span class="c6">user </span><span>is defined as any registered portal user, who is assigned any system or user-defined portal role.</span></li></ol><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_32hhcqmuu2me-0"><li class="c4 c0"><span>An </span><span class="c6">IP address</span><span>&nbsp;is defined as the IP address of the user&rsquo;s workstation running the browser trying to gain authorized access (login) to the portal.</span></li></ol><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_32hhcqmuu2me-0"><li class="c4 c0"><span>A </span><span class="c6">role </span><span>is defined as any system or user-defined portal role, which is assigned to a user or a group of users.</span></li></ol><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_32hhcqmuu2me-0"><li class="c4 c0"><span>A </span><span class="c6">redirect url</span><span>&nbsp;is any valid friendly portal url, where a user will be redirected to, when one fails to satisfy all defined restriction rules.</span></li></ol><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_32hhcqmuu2me-0"><li class="c4 c0"><span>A </span><span class="c6">rule </span><span>is any combination of a set of IP addresses and a set of portal user roles, which, when any match is true, login permission to such user is granted.</span></li></ol><p class="c0 c2"><span></span></p><h1 class="c0"><a name="h.85xg6bc75b60"></a><span>Description</span></h1><p class="c0 c2"><span></span></p><p class="c0"><span class="c14">&ldquo;Role Access Lists&rdquo; </span><span>plugin is very useful when you wish to handle the definition and control of specific access rules, when a user with administrative rights tries to sign in to the portal from an unauthorized IP address set by the administrator, so that you can restrict such access. </span></p><p class="c0 c2"><span></span></p><p class="c0"><span>Each rule is defined as a list of valid IP addresses, from where a user having any of the defined set of portal roles will be allowed to sign in. If a user with any of the defined roles attempts login access from an IP address other than the ones defined within the rule, then the rule is set to false. When any single pair (IP address + role) of a rule&rsquo;s defined information is evaluated to true, then the login access to the portal is being granted to that user. </span></p><p class="c0 c2"><span></span></p><p class="c0"><span>Multiple rules can be defined, each one having a different set of IP addresses and a different set of portal roles. When any single pair (IP address + role) of any rule is evaluated to true, then the login access to the portal is being granted to that user. When all the pairs of all rules are evaluated to false, then the login access to the portal is being restricted to that user.</span></p><p class="c0 c2"><span></span></p><p class="c0"><span>The plugin consists of two parts:</span></p><p class="c0 c2"><span></span></p><h2 class="c0"><a name="h.ockhxhdmag6k"></a><span>Role Access Lists Portlet</span></h2><p class="c0 c2"><span></span></p><p class="c0"><span>The Role Access Lists portlet is a &ldquo;portal section&rdquo; administrative (control panel) portlet. It is divided in 2 tabs, the first of which is the rule definition section, while the second is a portlet configuration section, common for all rules. </span></p><p class="c0 c2"><span></span></p><h3 class="c0"><a name="h.so21npm2gxqw"></a><span>Role Access Lists Tab</span></h3><p class="c0 c2"><span></span></p><p class="c0"><span>In the Role Access Lists tab, the initial (default) view shows the list of all the rules that have been defined by the administrator, unless some of the search filters on top of the page have been used. Such filters include:</span></p><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_ou877f141zaf-0 start"><li class="c4 c0"><span class="c7">All/Active/Inactive (list of values)</span><span>: Select a value from the list to show (a) all, (b) only the active, (c) only the inactive rules respectively (see below for the definition of active/inactive rules)</span></li><li class="c4 c0"><span class="c7">IP address</span><span>: Enter an exact or a part of an IP address to show only the rules starting from or matching the entered address</span></li><li class="c4 c0"><span class="c7">Role (list of values)</span><span>: Select one of the available portal roles to show only the rules matching the selected role</span></li></ol><p class="c0 c2"><span></span></p><p class="c0"><span>If there are no rules defined, then the form is empty and the only option is to &ldquo;Add a new entry&rdquo;.</span></p><p class="c0 c2"><span></span></p><p class="c0"><img height="493" src="images/image00.png" width="620"></p><p class="c0 c2"><span></span></p><p class="c0"><span>When adding a new Role Access List entry or editing an existing one you can define the following combinations of IP addresses and portal roles:</span></p><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_py5kmclk031q-0 start"><li class="c4 c0"><span class="c7">IP addresses (entry fields)</span><span>: Entered in the IP address partitioned entry field and shown in the Selected IPs table:</span></li></ol><ol class="c10 lst-kix_py5kmclk031q-1 start"><li class="c0 c1"><span>One IP address </span></li><li class="c1 c0"><span>Multiple IP addresses (list) </span></li><li class="c1 c0"><span>Range of IP addresses by eliminating one of the last 2 parts (i.e. 195.47.132 or 192.47) </span></li></ol><ol class="c10 lst-kix_py5kmclk031q-0"><li class="c4 c0"><span class="c7">Roles (tables)</span><span>: Selected one-by-one from the Available Roles table on the left and shown in the Selected Roles table on the right</span></li><li class="c4 c0"><span class="c7">Active (checkbox)</span><span>: Select this option if you wish this rule to be actually activated or just saved as inactive for future use or other historical reason</span></li><li class="c4 c0"><span class="c7">Notes (text field)</span><span>: In case the administrator wishes to enter some notes for his/her own documentation</span></li></ol><p class="c0 c2"><span></span></p><h3 class="c0"><a name="h.xgp2mwq2001d"></a><span>Rules Configuration Tab</span></h3><p class="c0 c2"><span></span></p><p class="c0"><span>In the Rules Configuration tab the global settings that can be defined by the administrator are:</span></p><p class="c0 c2"><span></span></p><ol class="c10 lst-kix_8agmhyqhgwov-0 start"><li class="c4 c0"><span class="c7">Redirect URL (entry field)</span><span>: A friendly url the portal will redirect to all users failing the active Role Access Lists at login time</span></li><li class="c4 c0"><span class="c7">Enable debug mode (checkbox)</span><span>: A flag permitting the administrator to test the rules. If this flag is checked (true) then the rules are not enforced by restricting access and redirected to the desired url, but they are evaluated and logged in the portal log file without being enforced. The categories used in the Server Administration Log Levels are</span></li></ol><ol class="c10 lst-kix_8agmhyqhgwov-1 start"><li class="c1 c0"><span>gr.open.marketplace.hook.actions.ValidateAdminAddressAction</span></li><li class="c1 c0"><span>gr.open.marketplace.hook.actions.HookedLayoutAction</span></li></ol><p class="c0 c2"><span></span></p><h2 class="c0"><a name="h.ob899mpdgbaw"></a><span>Role Access Lists Hook</span></h2><p class="c0 c2"><span></span></p><p class="c0"><span>The hook takes control whenever a portal login access is attempted by a user and: </span></p><ol class="c10 lst-kix_45pxdpmvn6vk-0 start"><li class="c4 c0"><span>retrieves the user&rsquo;s IP address</span></li><li class="c4 c0"><span>retrieves the user&rsquo;s portal roles including site and organization roles </span></li><li class="c4 c0"><span>checks them against all the active rules defined by the administrator with an &ldquo;OR&rdquo; logic, that is, if just one IP address and one role in any rule is satisfied by the user&rsquo;s above information then the access is granted, otherwise (if all rules fail) the user is redirected to the url defined in the configuration tab.</span></li></ol></body></html>